http:
  middlewares:
    auth:
      basicAuth:
        users:
          - '___user:pass'

    redirect-to-https:
      redirectScheme:
        scheme: https

  routers:
    dashboard-http:
      rule: 'Host(`dashboard.___domain`) && PathPrefix(`/`)'
      entryPoints:
        - http
      service: api@internal
      middlewares:
        - redirect-to-https

    dashboard-https:
      rule: 'Host(`dashboard.___domain`) && PathPrefix(`/`)'
      entryPoints:
        - https
      service: api@internal
      tls:
        certResolver: letsencrypt
      middlewares:
        - auth

# https://coolify.io/docs/knowledge-base/proxy/traefik/dashboard
